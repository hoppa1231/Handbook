<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Handbook Admin</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}" />
  </head>
  <body>
    <header>
      <h1>Панель управления справочником</h1>
      <p>Управление поставщиками, товарами и конкурентной картой</p>
      <div id="notification" role="status" aria-live="polite"></div>
    </header>

    <main>
      <nav class="tabs">
        <button class="tab-button active" data-tab="suppliers">Поставщики</button>
        <button class="tab-button" data-tab="products">Товары</button>
        <button class="tab-button" data-tab="competition">Конкурентная карта</button>
        <button class="tab-button" data-tab="prices">Цены поставщиков</button>
      </nav>

      <section class="tab-panel active" data-tab="suppliers">
        <h2>Поставщики</h2>
        <form id="supplier-form">
          <input type="hidden" id="supplier-id" />
          <div class="grid">
            <label>
              Название
              <input type="text" id="supplier-name" required />
            </label>
            <label>
              Адрес
              <input type="text" id="supplier-address" />
            </label>
            <label>
              Контакт
              <input type="text" id="supplier-contact" />
            </label>
            <label>
              Сайт
              <input type="url" id="supplier-website" />
            </label>
            <label>
              Рейтинг
              <input type="number" step="0.1" id="supplier-rating" />
            </label>
          </div>
          <div class="actions">
            <button type="submit">Сохранить</button>
            <button type="button" id="supplier-reset">Сброс</button>
          </div>
        </form>
        <div class="toolbar">
          <input
            type="search"
            id="supplier-search"
            placeholder="Поиск по названию, адресу или контакту..."
          />
        </div>
        <table id="suppliers-table">
          <thead>
            <tr>
              <th>ID</th>
              <th>Название</th>
              <th>Контакт</th>
              <th>Рейтинг</th>
              <th>Действия</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      </section>

      <section class="tab-panel" data-tab="products">
        <h2>Товары</h2>
        <form id="product-form">
          <input type="hidden" id="product-id" />
          <div class="grid">
            <label>
              Артикул
              <input type="text" id="product-part-number" required />
            </label>
            <label>
              Название
              <input type="text" id="product-name" required />
            </label>
            <label>
              Бренд
              <input type="text" id="product-brand" />
            </label>
            <label>
              Модель
              <input type="text" id="product-model" />
            </label>
            <label>
              Серийный номер
              <input type="text" id="product-serial" />
            </label>
            <label>
              Чертёж
              <input type="text" id="product-scheme" />
            </label>
            <label>
              Позиция на чертеже
              <input type="text" id="product-pos-scheme" />
            </label>
            <label>
              Материал
              <input type="text" id="product-material" />
            </label>
            <label>
              Размер
              <input type="text" id="product-size" />
            </label>
            <label>
              Категория
              <select type="text" id="product-category" placeholder="valve, wall..."></select>
            </label>
            <label>
              Комментарий
              <textarea id="product-comment" rows="2"></textarea>
            </label>
          </div>
          
          <div class="actions">
            <button type="submit">Сохранить</button>
            <button type="button" id="product-reset">Сброс</button>
          </div>
        </form>
        <div class="toolbar">
          <input
            type="search"
            id="product-search"
            placeholder="Поиск по артикулу, названию или бренду..."
          />
        </div>
        <table id="products-table">
          <thead>
            <tr>
              <th>ID</th>
              <th>Артикул</th>
              <th>Название</th>
              <th>Бренд</th>
              <th>Действия</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      </section>

      <section class="tab-panel" data-tab="competition">
        <h2>Конкурентная карта (поставщики → цены)</h2>
        <div class="grid two">
          <label>
            Товар
            <select id="competition-product-select"></select>
          </label>
          <button type="button" id="competition-refresh">Обновить карту</button>
        </div>
        <table id="competition-table">
          <thead>
            <tr>
              <th>Поставщик</th>
              <th>Цена</th>
              <th>Срок поставки (дни)</th>
              <th>Валюта</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      </section>

      <section class="tab-panel" data-tab="prices">
        <h2>Цены поставщиков</h2>
        <form id="price-form">
          <input type="hidden" id="price-id" />
          <div class="grid three">
            <label>
              Товар
              <select id="price-product"></select>
            </label>
            <label>
              Поставщик
              <select id="price-supplier"></select>
            </label>
            <label>
              Цена
              <input type="number" step="0.01" id="price-total" />
            </label>
            <label>
              Срок поставки (дни)
              <input type="number" step="0.1" id="price-lead" />
            </label>
            <label>
              Валюта
              <input type="text" id="price-currency" maxlength="10" />
            </label>
          </div>
          <div class="actions">
            <button type="submit">Сохранить</button>
            <button type="button" id="price-reset">Сброс</button>
          </div>
        </form>
        <div class="toolbar">
          <input
            type="search"
            id="price-search"
            placeholder="Поиск по товару или поставщику..."
          />
        </div>
        <table id="prices-table">
          <thead>
            <tr>
              <th>ID</th>
              <th>Товар</th>
              <th>Поставщик</th>
              <th>Цена</th>
              <th>Срок (дни)</th>
              <th>Валюта</th>
              <th>Действия</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      </section>
    </main>

    <script src="{{ url_for('static', filename='js/app.js') }}" type="module"></script>
  </body>
</html>
